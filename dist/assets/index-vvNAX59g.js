import{_ as w}from"./search-icon-B4ipM9vc.js";import{_ as S,a as T,l as F,T as B}from"./lg-thumbnail.es5-CDhgO952.js";import{r as p,o as N,a as h,c as r,b as t,d as j,q as $,t as o,F as g,g as v,_ as D,h as A,j as d,k as z}from"./index-C7n9bY8Y.js";import{S as c}from"./sweetalert2.esm.all-DGhwgajj.js";const I={class:"flex justify-between items-center"},K={class:"flex items-center gap-2"},M={class:"text-[16px] text-[var(--subTextColor)] font-semibold"},R={class:"mt-[50px] text-[14px]"},L={class:"w-full overflow-hidden rounded-[16px] border-spacing-0"},q={key:0},H={class:"align-middle p-[16px]"},V={class:"align-middle p-[16px]"},P={class:"align-middle p-[16px]"},E={class:"align-middle p-[16px]"},G={class:"align-middle p-[16px]"},O={class:"align-middle p-[16px]"},X={class:"align-middle p-[16px]"},Y={class:"align-middle p-[16px] flex items-center gap-[12px]"},J=["onClick"],Q=["onClick"],U=["onClick"],W={key:1},Z={key:0,class:"fixed top-0 right-0 left-0 bottom-0 h-[100vh] flex justify-center items-center isolate z-50 animate-fadeIn"},tt={class:"h-[800px] w-[623px] bg-[var(--bgColor2)] rounded-[16px] backdrop-blur-[70px] animate-fadeDown"},et={class:"py-[8px] px-[16px] h-[calc(800px-54px)] overflow-auto modal__body"},st={class:"pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},ot={class:"flex items-center gap-[8px] mb-[16px]"},at={class:"modal__info"},nt={class:"font-semibold"},lt={class:"text-[var(--subTextColor)]"},it={class:"flex justify-between items-center mb-[10px] gap-[20px]"},rt={class:"modal__detail-text text-single"},dt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},ct={class:"modal__detail-text text-single"},pt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},xt={class:"modal__detail-text text-single"},mt={class:"mt-2 pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},ut={class:"flex items-center gap-[8px] mb-[16px]"},ft={class:"modal__info"},ht={class:"font-semibold"},gt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},_t={class:"modal__detail-text text-single"},bt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},vt={class:"modal__detail-text text-single"},yt={class:"modal__textarea"},kt={class:"font-medium mt-1"},Ct={class:"mt-[10px]"},wt=["href"],St=["src","alt"],$t={__name:"index",setup(Tt){function _(a){const e=new Date(a),s=String(e.getDate()).padStart(2,"0"),l=String(e.getMonth()+1).padStart(2,"0"),f=e.getFullYear();return`${s}/${l}/${f}`}const i=p([]),x=p(0),m=p(!1),u=p(null),n=p({images:[]});function y(a){n.value={...a,images:a.imagesProof||[]},m.value=!0,z(()=>{u.value&&F(u.value,{plugins:[B],thumbnail:!0,download:!0})})}function b(){m.value=!1}N(async()=>{try{const a=await h.get("http://127.0.0.1:8000/api/admin/data-report-approve-0",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});i.value=a.data.data,x.value=i.value.length}catch(a){console.error(a)}});async function k(a,e){try{if(!(await c.fire({title:"Bạn có chắc muốn duyệt?",icon:"question",showCancelButton:!0,confirmButtonText:"Có",cancelButtonText:"Không"})).isConfirmed)return;const l=await h.post("http://127.0.0.1:8000/api/admin/update-report-approve-1",{id:a,approve:e},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});c.fire({icon:"success",title:"Thành công",text:l.data.message,timer:1500,showConfirmButton:!1}),i.value=i.value.filter(f=>f.id!==a),x.value=i.value.length}catch(s){c.fire({icon:"error",title:"Lỗi",text:s.response?.data?.message||"Có lỗi xảy ra!"})}}async function C(a){if((await c.fire({title:"Bạn có chắc chắn muốn xoá?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#db2828",cancelButtonColor:"#ccc",confirmButtonText:"Xoá",cancelButtonText:"Huỷ"})).isConfirmed)try{const s=await h.post("http://127.0.0.1:8000/api/admin/delete-report",{id:a},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});c.fire("Đã xoá thành công!",s.data.message,"success"),i.value=i.value.filter(l=>l.id!==a),x.value=i.value.length}catch(s){c.fire("Lỗi!",s.response?.data?.message||"Không thể xoá","error")}}return(a,e)=>(d(),r(g,null,[t("div",I,[t("div",K,[e[0]||(e[0]=t("h2",{class:"font-bold text-[24px]"},"Danh sách đợi duyệt",-1)),t("p",M,"(Có "+o(x.value)+" đơn đợi duyệt)",1)]),e[1]||(e[1]=$('<form class="max-w-[500px] w-full mr-0 mt-0 rounded-[16px] bg-[var(--bgColor3)] border border-[rgba(255,255,255,0.1)] flex items-center p-[5px] mx-auto"><input type="text" placeholder="Kiểm tra số tài khoản ngân hàng..." class="flex-1 bg-transparent border-none outline-none pl-[19px] text-[var(--textColor)]"><button class="btn"><img src="'+w+'" alt="" class="block md:hidden"><span class="hidden md:block">Tìm Kiếm</span></button></form>',1))]),t("div",R,[t("table",L,[e[6]||(e[6]=t("thead",{class:"bg-[var(--bgColor3)]"},[t("tr",null,[t("th",{class:"p-[16px] text-left"},"id"),t("th",{class:"p-[16px] text-left"},"Chủ tài khoản"),t("th",{class:"p-[16px] text-left"},"Số tài khoản"),t("th",{class:"p-[16px] text-left"},"Ngân hàng"),t("th",{class:"p-[16px] text-left"},"Sđt đối tượng"),t("th",{class:"p-[16px] text-left"},"Người gửi đơn"),t("th",{class:"p-[16px] text-left"},"Ngày gửi"),t("th",{class:"p-[16px] text-left"})])],-1)),i.value.length>0?(d(),r("tbody",q,[(d(!0),r(g,null,v(i.value,s=>(d(),r("tr",{key:s.id,class:"dashboard__table-bodyItem"},[t("td",H,"#"+o(s.id),1),t("td",V,o(s.nameScammer),1),t("td",P,o(s.bankNumber),1),t("td",E,o(s.bankName),1),t("td",G,o(s.phoneScammer),1),t("td",O,o(s.nameSender),1),t("td",X,o(_(s.created_at)),1),t("td",Y,[t("span",{onClick:l=>k(s.id,1),class:"cursor-pointer text-[18px] text-[#1ad132]"},e[2]||(e[2]=[t("i",{class:"fa-solid fa-check"},null,-1)]),8,J),t("span",{onClick:l=>y(s),class:"cursor-pointer text-[18px]"},e[3]||(e[3]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,Q),t("span",{onClick:l=>C(s.id),class:"cursor-pointer text-[18px] text-[var(--redColor)]"},e[4]||(e[4]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,U)])]))),128))])):(d(),r("tbody",W,e[5]||(e[5]=[t("tr",null,[t("td",{colspan:"8",class:"relative h-[590px]"},[t("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-50 text-center"},[t("img",{src:S,class:"h-[200px]"}),t("span",{class:"text-center"},"Không có dữ liệu")])])],-1)])))])]),m.value?(d(),r("section",Z,[t("div",{onClick:b,class:"absolute top-0 right-0 left-0 bottom-0 bg-black/60 cursor-pointer z-[-1]"}),t("div",tt,[t("div",{class:"flex justify-between items-center h-[54px] py-[12px] px-[16px] border-b border-[#FFFFFF1A]"},[e[8]||(e[8]=t("div",{class:"text-[20px] font-semibold"},"Chi tiết tố cáo",-1)),t("div",{onClick:b,class:"w-[30px] h-[30px] rounded-full bg-[var(--bgColor3)] flex justify-center items-center cursor-pointer transition-all duration-200 ease-linear hover:opacity-50"},e[7]||(e[7]=[t("img",{src:D,alt:"close icon",class:"pointer-events-none"},null,-1)]))]),t("div",et,[t("div",st,[t("div",ot,[e[9]||(e[9]=t("div",{class:"modal__profile-image"},[t("img",{src:T,alt:"avatar"})],-1)),t("div",at,[t("h4",nt,o(n.value.nameScammer),1),t("p",lt,"#"+o(n.value.id)+" - Tố vào ngày "+o(_(n.value.created_at)),1)])]),t("div",it,[e[10]||(e[10]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số điện thoại",-1)),t("span",rt,o(n.value.phoneScammer),1)]),t("div",dt,[e[11]||(e[11]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số tài khoản",-1)),t("span",ct,o(n.value.bankNumber),1)]),t("div",pt,[e[12]||(e[12]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Ngân Hàng",-1)),t("span",xt,o(n.value.bankName),1)])]),t("div",mt,[t("div",ut,[e[14]||(e[14]=t("div",{class:"modal__profile-image"},[t("img",{src:A,alt:"avatar"})],-1)),t("div",ft,[t("h4",ht,o(n.value.nameSender),1),e[13]||(e[13]=t("p",{class:"text-[var(--subTextColor)]"},"Người tố cáo",-1))])]),t("div",gt,[e[15]||(e[15]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Trạng Thái",-1)),t("span",_t,o(n.value.option),1)]),t("div",bt,[e[16]||(e[16]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Liên hệ",-1)),t("span",vt,o(n.value.phoneSender),1)]),t("div",yt,[e[17]||(e[17]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Nội dung tố cáo",-1)),t("p",kt,o(n.value.contentReport),1)]),t("div",Ct,[e[18]||(e[18]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Hình ảnh liên quan",-1)),t("div",{ref_key:"galleryRef",ref:u,class:"grid grid-cols-3 gap-2 mt-2"},[(d(!0),r(g,null,v(n.value.imagesProof,(s,l)=>(d(),r("a",{key:l,href:s},[t("img",{src:s,alt:`Ảnh bằng chứng ${n.value.nameScammer} ${l+1}`,class:"h-[237px] w-full object-cover rounded-[8px] cursor-pointer transition duration-200 hover:opacity-50"},null,8,St)],8,wt))),128))],512)])])])])])):j("",!0)],64))}};export{$t as default};
