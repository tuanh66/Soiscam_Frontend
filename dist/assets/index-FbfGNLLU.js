import{_ as C}from"./search-icon-B4ipM9vc.js";import{_ as w,a as F,l as S,T}from"./lg-thumbnail.es5-CDhgO952.js";import{r as c,o as N,a as g,c as i,d as t,e as j,b as B,t as o,F as u,f as h,_ as D,g as $,h as r,i as M}from"./index-BtmJLjuX.js";import{S as _}from"./sweetalert2.esm.all-DGhwgajj.js";const K={class:"flex justify-between items-center"},R={class:"flex items-center gap-2"},A={class:"text-[16px] text-[var(--subTextColor)] font-semibold"},H={class:"mt-[50px] text-[14px]"},L={class:"w-full overflow-hidden rounded-[16px] border-spacing-0"},V={key:0},z={class:"align-middle p-[16px]"},I={class:"align-middle p-[16px]"},P={class:"align-middle p-[16px]"},q={class:"align-middle p-[16px]"},E={class:"align-middle p-[16px]"},G={class:"align-middle p-[16px]"},O={class:"align-middle p-[16px]"},X={class:"align-middle p-[16px] flex items-center gap-[12px]"},Y=["onClick"],J=["onClick"],Q={key:1},U={key:0,class:"fixed top-0 right-0 left-0 bottom-0 h-[100vh] flex justify-center items-center isolate z-50 animate-fadeIn"},W={class:"h-[800px] w-[623px] bg-[var(--bgColor2)] rounded-[16px] backdrop-blur-[70px] animate-fadeDown"},Z={class:"py-[8px] px-[16px] h-[calc(800px-54px)] overflow-auto modal__body"},tt={class:"pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},et={class:"flex items-center gap-[8px] mb-[16px]"},st={class:"modal__info"},ot={class:"font-semibold"},at={class:"text-[var(--subTextColor)]"},lt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},nt={class:"modal__detail-text text-single"},it={class:"flex justify-between items-center mb-[10px] gap-[20px]"},rt={class:"modal__detail-text text-single"},dt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},ct={class:"modal__detail-text text-single"},pt={class:"mt-2 pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},xt={class:"flex items-center gap-[8px] mb-[16px]"},mt={class:"modal__info"},ut={class:"font-semibold"},_t={class:"flex justify-between items-center mb-[10px] gap-[20px]"},ft={class:"modal__detail-text text-single"},bt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},gt={class:"modal__detail-text text-single"},ht={class:"modal__textarea"},vt={class:"font-medium mt-1"},yt={class:"mt-[10px]"},kt=["href"],Ct=["src","alt"],jt={__name:"index",setup(wt){function f(l){const e=new Date(l),s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),k=e.getFullYear();return`${s}/${n}/${k}`}const d=c([]),p=c(0),x=c(!1),m=c(null),a=c({images:[]});function v(l){a.value={...l,images:l.imagesProof||[]},x.value=!0,M(()=>{m.value&&S(m.value,{plugins:[T],thumbnail:!0,download:!0})})}function b(){x.value=!1}N(async()=>{try{const l=await g.get("http://127.0.0.1:8000/api/admin/data-report-approve-1");d.value=l.data.data,p.value=d.value.length}catch{console.error(err)}});async function y(l){if((await _.fire({title:"Bạn có chắc chắn muốn xoá?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#db2828",cancelButtonColor:"#ccc",confirmButtonText:"Xoá",cancelButtonText:"Huỷ"})).isConfirmed)try{const s=await g.post("http://127.0.0.1:8000/api/admin/delete-report",{id:l});_.fire("Đã xoá thành công!",s.data.message,"success"),d.value=d.value.filter(n=>n.id!==l),p.value=d.value.length}catch(s){_.fire("Lỗi!",s.response?.data?.message||"Không thể xoá","error")}}return(l,e)=>(r(),i(u,null,[t("div",K,[t("div",R,[e[0]||(e[0]=t("h2",{class:"font-bold text-[24px]"},"Danh sách scammer",-1)),t("p",A,"(Có "+o(p.value)+" đơn tố cáo)",1)]),e[1]||(e[1]=B('<form class="max-w-[500px] w-full mr-0 mt-0 rounded-[16px] bg-[var(--bgColor3)] border border-[rgba(255,255,255,0.1)] flex items-center p-[5px] mx-auto"><input type="text" placeholder="Kiểm tra số tài khoản ngân hàng..." class="flex-1 bg-transparent border-none outline-none pl-[19px] text-[var(--textColor)]"><button class="btn"><img src="'+C+'" alt="" class="block md:hidden"><span class="hidden md:block">Tìm Kiếm</span></button></form>',1))]),t("div",H,[t("table",L,[e[5]||(e[5]=t("thead",{class:"bg-[var(--bgColor3)]"},[t("tr",null,[t("th",{class:"p-[16px] text-left"},"id"),t("th",{class:"p-[16px] text-left"},"Chủ tài khoản"),t("th",{class:"p-[16px] text-left"},"Số tài khoản"),t("th",{class:"p-[16px] text-left"},"Ngân hàng"),t("th",{class:"p-[16px] text-left"},"Sđt đối tượng"),t("th",{class:"p-[16px] text-left"},"Người gửi đơn"),t("th",{class:"p-[16px] text-left"},"Ngày gửi"),t("th",{class:"p-[16px] text-left"})])],-1)),d.value.length>0?(r(),i("tbody",V,[(r(!0),i(u,null,h(d.value,s=>(r(),i("tr",{key:s.id,class:"dashboard__table-bodyItem"},[t("td",z,"#"+o(s.id),1),t("td",I,o(s.nameScammer),1),t("td",P,o(s.bankNumber),1),t("td",q,o(s.bankName),1),t("td",E,o(s.phoneScammer),1),t("td",G,o(s.nameSender),1),t("td",O,o(f(s.created_at)),1),t("td",X,[t("span",{onClick:n=>v(s),class:"cursor-pointer text-[18px]"},e[2]||(e[2]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,Y),t("span",{onClick:n=>y(s.id),class:"cursor-pointer text-[18px] text-[var(--redColor)]"},e[3]||(e[3]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,J)])]))),128))])):(r(),i("tbody",Q,e[4]||(e[4]=[t("tr",null,[t("td",{colspan:"8",class:"relative h-[590px]"},[t("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-50 text-center"},[t("img",{src:w,class:"h-[200px]"}),t("span",{class:"text-center"},"Không có dữ liệu")])])],-1)])))])]),x.value?(r(),i("section",U,[t("div",{onClick:b,class:"absolute top-0 right-0 left-0 bottom-0 bg-black/60 cursor-pointer z-[-1]"}),t("div",W,[t("div",{class:"flex justify-between items-center h-[54px] py-[12px] px-[16px] border-b border-[#FFFFFF1A]"},[e[7]||(e[7]=t("div",{class:"text-[20px] font-semibold"},"Chi tiết tố cáo",-1)),t("div",{onClick:b,class:"w-[30px] h-[30px] rounded-full bg-[var(--bgColor3)] flex justify-center items-center cursor-pointer transition-all duration-200 ease-linear hover:opacity-50"},e[6]||(e[6]=[t("img",{src:D,alt:"close icon",class:"pointer-events-none"},null,-1)]))]),t("div",Z,[t("div",tt,[t("div",et,[e[8]||(e[8]=t("div",{class:"modal__profile-image"},[t("img",{src:F,alt:"avatar"})],-1)),t("div",st,[t("h4",ot,o(a.value.nameScammer),1),t("p",at,"#"+o(a.value.id)+" - Tố vào ngày "+o(f(a.value.created_at)),1)])]),t("div",lt,[e[9]||(e[9]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số điện thoại",-1)),t("span",nt,o(a.value.phoneScammer),1)]),t("div",it,[e[10]||(e[10]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số tài khoản",-1)),t("span",rt,o(a.value.bankNumber),1)]),t("div",dt,[e[11]||(e[11]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Ngân Hàng",-1)),t("span",ct,o(a.value.bankName),1)])]),t("div",pt,[t("div",xt,[e[13]||(e[13]=t("div",{class:"modal__profile-image"},[t("img",{src:$,alt:"avatar"})],-1)),t("div",mt,[t("h4",ut,o(a.value.nameSender),1),e[12]||(e[12]=t("p",{class:"text-[var(--subTextColor)]"},"Người tố cáo",-1))])]),t("div",_t,[e[14]||(e[14]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Trạng Thái",-1)),t("span",ft,o(a.value.option),1)]),t("div",bt,[e[15]||(e[15]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Liên hệ",-1)),t("span",gt,o(a.value.phoneSender),1)]),t("div",ht,[e[16]||(e[16]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Nội dung tố cáo",-1)),t("p",vt,o(a.value.contentReport),1)]),t("div",yt,[e[17]||(e[17]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Hình ảnh liên quan",-1)),t("div",{ref_key:"galleryRef",ref:m,class:"grid grid-cols-3 gap-2 mt-2"},[(r(!0),i(u,null,h(a.value.imagesProof,(s,n)=>(r(),i("a",{key:n,href:s},[t("img",{src:s,alt:`Ảnh bằng chứng ${a.value.nameScammer} ${n+1}`,class:"h-[237px] w-full object-cover rounded-[8px] cursor-pointer transition duration-200 hover:opacity-50"},null,8,Ct)],8,kt))),128))],512)])])])])])):j("",!0)],64))}};export{jt as default};
