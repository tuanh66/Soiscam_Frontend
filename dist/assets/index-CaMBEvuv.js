import{r as p,k as K,l as S,c as r,a as t,j as M,t as a,w as L,d as V,v as H,x as U,F as b,f as T,_ as E,p as P,g as f,h as G,i as d,q as O}from"./index-BQYtG4s7.js";import{_ as X,a as Y}from"./not-found-JlC-HFKX.js";import{_ as J,l as Q,T as W}from"./lg-thumbnail.es5-BWdwUL38.js";import{l as Z,S as u}from"./lodash-CKW68pZj.js";import"./_commonjsHelpers-Cpj98o6Y.js";const tt={class:"flex justify-between items-center"},et={class:"flex items-center gap-2"},st={class:"text-[16px] text-[var(--subTextColor)] font-semibold"},ot={class:"mt-[50px] text-[14px]"},at={class:"max-h-[calc(100vh-312px)] overflow-y-auto"},lt={class:"w-full border-spacing-0 table-fixed"},nt={key:0},it={key:1},rt={class:"align-middle p-[16px]"},dt={class:"align-middle p-[16px]"},ct={class:"align-middle p-[16px]"},pt={class:"align-middle p-[16px]"},ut={class:"align-middle p-[16px]"},xt={class:"align-middle p-[16px]"},ht={class:"align-middle p-[16px]"},mt={class:"align-middle p-[16px] flex items-center gap-[12px]"},ft=["onClick"],gt=["onClick"],vt=["onClick"],_t={key:2},bt={colspan:"8",class:"relative h-[calc(100vh-327px)]"},yt={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-50 text-center"},wt={class:"text-center"},kt={key:0,class:"fixed top-0 right-0 left-0 bottom-0 h-[100vh] flex justify-center items-center isolate z-50 animate-fadeIn"},Ct={class:"h-[800px] w-[623px] bg-[var(--bgColor2)] rounded-[16px] backdrop-blur-[70px] animate-fadeDown"},St={class:"py-[8px] px-[16px] h-[calc(800px-54px)] overflow-auto modal__body"},Tt={class:"pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},Ft={class:"flex items-center gap-[8px] mb-[16px]"},Bt={class:"modal__info"},Dt={class:"font-semibold"},$t={class:"text-[var(--subTextColor)]"},Nt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},jt={class:"modal__detail-text text-single"},Rt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},At={class:"modal__detail-text text-single"},It={class:"flex justify-between items-center mb-[10px] gap-[20px]"},qt={class:"modal__detail-text text-single"},zt={class:"mt-2 pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},Kt={class:"flex items-center gap-[8px] mb-[16px]"},Mt={class:"modal__info"},Lt={class:"font-semibold"},Vt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},Ht={class:"modal__detail-text text-single"},Ut={class:"flex justify-between items-center mb-[10px] gap-[20px]"},Et={class:"modal__detail-text text-single"},Pt={class:"modal__textarea"},Gt={class:"font-medium mt-1"},Ot={class:"mt-[10px]"},Xt=["href"],Yt=["src","alt"],se={__name:"index",setup(Jt){function y(o){const e=new Date(o),s=String(e.getDate()).padStart(2,"0"),l=String(e.getMonth()+1).padStart(2,"0"),_=e.getFullYear();return`${s}/${l}/${_}`}const F="http://127.0.0.1:8000/api/admin/data-report-approve-0",B="http://127.0.0.1:8000/api/admin/search-approve-0",D="http://127.0.0.1:8000/api/admin/update-report-approve-1",$="http://127.0.0.1:8000/api/admin/delete-report",w=K(),N=G(),c=p(w.query.search||""),m=p(!!c.value),x=p(!1),i=p([]),h=p(0),g=p(!1),v=p(null),n=p({images:[]});function j(o){n.value={...o,images:o.imagesProof||[]},g.value=!0,O(()=>{v.value&&Q(v.value,{plugins:[W],thumbnail:!0,download:!0})})}function k(){g.value=!1}async function R(){try{x.value=!0;const o=localStorage.getItem("token"),e=await f.get(F,{headers:{Authorization:"Bearer "+o}});i.value=e.data.data,h.value=e.data.data.length}catch(o){console.error(o)}finally{x.value=!1}}async function C(o){try{x.value=!0;const e=o.trim();if(m.value=!!e,!e){await R(),m.value=!1;return}m.value=!0;const s=localStorage.getItem("token"),l=await f.get(`${B}?search=${encodeURIComponent(e)}`,{headers:{Authorization:"Bearer "+s}});i.value=l.data.data,h.value=l.data.data.length}catch(e){console.error(e)}finally{x.value=!1}}const A=Z.debounce(o=>{C(o)},400);S(c,o=>{A(o)}),S(()=>w.query.search,o=>{c.value=o||"",C(c.value)},{immediate:!0});async function I(){const o=c.value.trim()?{search:c.value.trim()}:{};N.replace({query:o})}async function q(o,e){try{if(!(await u.fire({title:"Bạn có chắc muốn duyệt?",icon:"question",showCancelButton:!0,confirmButtonText:"Có",cancelButtonText:"Không"})).isConfirmed)return;const l=await f.post(D,{id:o,approve:e},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});u.fire({icon:"success",title:"Thành công",text:l.data.message,timer:1500,showConfirmButton:!1}),i.value=i.value.filter(_=>_.id!==o),h.value=i.value.length}catch(s){u.fire({icon:"error",title:"Lỗi",text:s.response?.data?.message||"Có lỗi xảy ra!"})}}async function z(o){if((await u.fire({title:"Bạn có chắc chắn muốn xoá?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#db2828",cancelButtonColor:"#ccc",confirmButtonText:"Xoá",cancelButtonText:"Huỷ"})).isConfirmed)try{const s=await f.post($,{id:o},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});u.fire("Đã xoá thành công!",s.data.message,"success"),i.value=i.value.filter(l=>l.id!==o),h.value=i.value.length}catch(s){u.fire("Lỗi!",s.response?.data?.message||"Không thể xoá","error")}}return(o,e)=>(d(),r(b,null,[t("div",tt,[t("div",et,[e[1]||(e[1]=t("h2",{class:"font-bold text-[24px]"},"Danh sách đợi duyệt",-1)),t("p",st,"(Có "+a(h.value)+" đơn đợi duyệt)",1)]),t("form",{onSubmit:L(I,["prevent"]),class:"max-w-[500px] w-full mr-0 mt-0 rounded-[16px] bg-[var(--bgColor3)] border border-[rgba(255,255,255,0.1)] flex items-center p-[5px] mx-auto"},[V(t("input",{type:"text",placeholder:"Kiểm tra số tài khoản ngân hàng...","onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),class:"flex-1 bg-transparent border-none outline-none pl-[19px] text-[var(--textColor)]"},null,512),[[H,c.value]]),e[2]||(e[2]=t("button",{class:"btn"},[t("img",{src:X,alt:"",class:"block md:hidden"}),t("span",{class:"hidden md:block"},"Tìm Kiếm")],-1))],32)]),t("div",ot,[e[9]||(e[9]=U('<table class="w-full overflow-hidden rounded-t-[16px] border-spacing-0 table-fixed"><colgroup><col style="width:5%;"><col style="width:15%;"><col style="width:10%;"><col style="width:10%;"><col style="width:10%;"><col style="width:15%;"><col style="width:10%;"><col style="width:10%;"></colgroup><thead class="bg-[var(--bgColor3)]"><tr><th class="p-[16px] text-left">id</th><th class="p-[16px] text-left">Chủ tài khoản</th><th class="p-[16px] text-left">Số tài khoản</th><th class="p-[16px] text-left">Ngân hàng</th><th class="p-[16px] text-left">Sđt đối tượng</th><th class="p-[16px] text-left">Người gửi đơn</th><th class="p-[16px] text-left">Ngày gửi</th><th class="p-[16px] text-left"></th></tr></thead></table>',1)),t("div",at,[t("table",lt,[e[8]||(e[8]=t("colgroup",null,[t("col",{style:{width:"5%"}}),t("col",{style:{width:"15%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"15%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"10%"}})],-1)),x.value?(d(),r("tbody",nt,e[3]||(e[3]=[t("tr",null,[t("td",{colspan:"8",class:"relative h-[calc(100vh-327px)]"},[t("div",{class:"fui-loading-ring loading absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},[t("div"),t("div"),t("div"),t("div")])])],-1)]))):i.value.length?(d(),r("tbody",it,[(d(!0),r(b,null,T(i.value,s=>(d(),r("tr",{key:s.id,class:"dashboard__table-bodyItem"},[t("td",rt,"#"+a(s.id),1),t("td",dt,a(s.nameScammer),1),t("td",ct,a(s.bankNumber),1),t("td",pt,a(s.bankName),1),t("td",ut,a(s.phoneScammer),1),t("td",xt,a(s.nameSender),1),t("td",ht,a(y(s.created_at)),1),t("td",mt,[t("span",{onClick:l=>q(s.id,1),class:"cursor-pointer text-[18px] text-[#1ad132]"},e[4]||(e[4]=[t("i",{class:"fa-solid fa-check"},null,-1)]),8,ft),t("span",{onClick:l=>j(s),class:"cursor-pointer text-[18px]"},e[5]||(e[5]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,gt),t("span",{onClick:l=>z(s.id),class:"cursor-pointer text-[18px] text-[var(--redColor)]"},e[6]||(e[6]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,vt)])]))),128))])):(d(),r("tbody",_t,[t("tr",null,[t("td",bt,[t("div",yt,[e[7]||(e[7]=t("img",{src:Y,class:"h-[200px]"},null,-1)),t("span",wt,a(m.value&&!i.value.length?"Không có dữ liệu bạn cần tìm":"Không có dữ liệu"),1)])])])]))])])]),g.value?(d(),r("section",kt,[t("div",{onClick:k,class:"absolute top-0 right-0 left-0 bottom-0 bg-black/60 cursor-pointer z-[-1]"}),t("div",Ct,[t("div",{class:"flex justify-between items-center h-[54px] py-[12px] px-[16px] border-b border-[#FFFFFF1A]"},[e[11]||(e[11]=t("div",{class:"text-[20px] font-semibold"},"Chi tiết tố cáo",-1)),t("div",{onClick:k,class:"w-[30px] h-[30px] rounded-full bg-[var(--bgColor3)] flex justify-center items-center cursor-pointer transition-all duration-200 ease-linear hover:opacity-50"},e[10]||(e[10]=[t("img",{src:E,alt:"close icon",class:"pointer-events-none"},null,-1)]))]),t("div",St,[t("div",Tt,[t("div",Ft,[e[12]||(e[12]=t("div",{class:"modal__profile-image"},[t("img",{src:J,alt:"avatar"})],-1)),t("div",Bt,[t("h4",Dt,a(n.value.nameScammer),1),t("p",$t,"#"+a(n.value.id)+" - Tố vào ngày "+a(y(n.value.created_at)),1)])]),t("div",Nt,[e[13]||(e[13]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số điện thoại",-1)),t("span",jt,a(n.value.phoneScammer),1)]),t("div",Rt,[e[14]||(e[14]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số tài khoản",-1)),t("span",At,a(n.value.bankNumber),1)]),t("div",It,[e[15]||(e[15]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Ngân Hàng",-1)),t("span",qt,a(n.value.bankName),1)])]),t("div",zt,[t("div",Kt,[e[17]||(e[17]=t("div",{class:"modal__profile-image"},[t("img",{src:P,alt:"avatar"})],-1)),t("div",Mt,[t("h4",Lt,a(n.value.nameSender),1),e[16]||(e[16]=t("p",{class:"text-[var(--subTextColor)]"},"Người tố cáo",-1))])]),t("div",Vt,[e[18]||(e[18]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Trạng Thái",-1)),t("span",Ht,a(n.value.option),1)]),t("div",Ut,[e[19]||(e[19]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Liên hệ",-1)),t("span",Et,a(n.value.phoneSender),1)]),t("div",Pt,[e[20]||(e[20]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Nội dung tố cáo",-1)),t("p",Gt,a(n.value.contentReport),1)]),t("div",Ot,[e[21]||(e[21]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Hình ảnh liên quan",-1)),t("div",{ref_key:"galleryRef",ref:v,class:"grid grid-cols-3 gap-2 mt-2"},[(d(!0),r(b,null,T(n.value.imagesProof,(s,l)=>(d(),r("a",{key:l,href:s},[t("img",{src:s,alt:`Ảnh bằng chứng ${n.value.nameScammer} ${l+1}`,class:"h-[237px] w-full object-cover rounded-[8px] cursor-pointer transition duration-200 hover:opacity-50"},null,8,Yt)],8,Xt))),128))],512)])])])])])):M("",!0)],64))}};export{se as default};
