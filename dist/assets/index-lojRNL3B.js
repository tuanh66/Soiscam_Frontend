import{r as p,k as M,l as C,c as r,a as t,j as q,t as a,w as z,d as K,v as L,x as V,F as g,f as S,_ as H,p as E,g as v,h as P,i as d,q as U}from"./index-BQYtG4s7.js";import{_ as G,a as O}from"./not-found-JlC-HFKX.js";import{_ as X,l as Y,T as J}from"./lg-thumbnail.es5-BWdwUL38.js";import{l as Q,S as _}from"./lodash-CKW68pZj.js";import"./_commonjsHelpers-Cpj98o6Y.js";const W={class:"flex justify-between items-center"},Z={class:"flex items-center gap-2"},tt={class:"text-[16px] text-[var(--subTextColor)] font-semibold"},et={class:"mt-[50px] text-[14px]"},st={class:"max-h-[calc(100vh-312px)] overflow-y-auto"},ot={class:"w-full border-spacing-0 table-fixed"},at={key:0},lt={key:1},nt={class:"align-middle p-[16px]"},it={class:"align-middle p-[16px]"},rt={class:"align-middle p-[16px]"},dt={class:"align-middle p-[16px]"},ct={class:"align-middle p-[16px]"},pt={class:"align-middle p-[16px]"},ut={class:"align-middle p-[16px]"},xt={class:"align-middle p-[16px] flex items-center gap-[12px]"},mt=["onClick"],ht=["onClick"],ft={key:2},gt={colspan:"8",class:"relative h-[calc(100vh-327px)]"},vt={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-50 text-center"},_t={class:"text-center"},bt={key:0,class:"fixed top-0 right-0 left-0 bottom-0 h-[100vh] flex justify-center items-center isolate z-50 animate-fadeIn"},yt={class:"h-[800px] w-[623px] bg-[var(--bgColor2)] rounded-[16px] backdrop-blur-[70px] animate-fadeDown"},wt={class:"py-[8px] px-[16px] h-[calc(800px-54px)] overflow-auto modal__body"},kt={class:"pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},Ct={class:"flex items-center gap-[8px] mb-[16px]"},St={class:"modal__info"},Ft={class:"font-semibold"},Tt={class:"text-[var(--subTextColor)]"},Dt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},Nt={class:"modal__detail-text text-single"},Bt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},$t={class:"modal__detail-text text-single"},jt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},Rt={class:"modal__detail-text text-single"},At={class:"mt-2 pb-2 border-b border-[#FFFFFF1A] last:border-b-0"},It={class:"flex items-center gap-[8px] mb-[16px]"},Mt={class:"modal__info"},qt={class:"font-semibold"},zt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},Kt={class:"modal__detail-text text-single"},Lt={class:"flex justify-between items-center mb-[10px] gap-[20px]"},Vt={class:"modal__detail-text text-single"},Ht={class:"modal__textarea"},Et={class:"font-medium mt-1"},Pt={class:"mt-[10px]"},Ut=["href"],Gt=["src","alt"],Zt={__name:"index",setup(Ot){function b(o){const e=new Date(o),s=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),I=e.getFullYear();return`${s}/${i}/${I}`}const F="http://127.0.0.1:8000/api/admin/data-report-approve-1",T="http://127.0.0.1:8000/api/admin/search-approve-1",D="http://127.0.0.1:8000/api/admin/delete-report",y=M(),N=P(),c=p(y.query.search||""),x=p(!!c.value),u=p(!1),n=p([]),m=p(0),h=p(!1),f=p(null),l=p({images:[]});function B(o){l.value={...o,images:o.imagesProof||[]},h.value=!0,U(()=>{f.value&&Y(f.value,{plugins:[J],thumbnail:!0,download:!0})})}function w(){h.value=!1}async function $(){try{u.value=!0;const o=localStorage.getItem("token"),e=await v.get(F,{headers:{Authorization:"Bearer "+o}});n.value=e.data.data,m.value=n.value.length}catch(o){console.error(o)}finally{u.value=!1}}async function k(o){try{u.value=!0;const e=o.trim();if(x.value=!!e,!e){await $(),x.value=!1;return}x.value=!0;const s=localStorage.getItem("token"),i=await v.get(`${T}?search=${encodeURIComponent(e)}`,{headers:{Authorization:"Bearer "+s}});n.value=i.data.data,m.value=n.value.length}catch(e){console.log(e)}finally{u.value=!1}}const j=Q.debounce(o=>{k(o)},400);C(c,o=>{j(o)}),C(()=>y.query.search,o=>{c.value=o||"",k(c.value)},{immediate:!0});async function R(){const o=c.value.trim()?{search:c.value.trim()}:{};N.replace({query:o})}async function A(o){if((await _.fire({title:"Bạn có chắc chắn muốn xoá?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#db2828",cancelButtonColor:"#ccc",confirmButtonText:"Xoá",cancelButtonText:"Huỷ"})).isConfirmed)try{const s=await v.post(D,{id:o},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});_.fire("Đã xoá thành công!",s.data.message,"success"),n.value=n.value.filter(i=>i.id!==o),m.value=n.value.length}catch(s){_.fire("Lỗi!",s.response?.data?.message||"Không thể xoá","error")}}return(o,e)=>(d(),r(g,null,[t("div",W,[t("div",Z,[e[1]||(e[1]=t("h2",{class:"font-bold text-[24px]"},"Danh sách scammer",-1)),t("p",tt,"(Có "+a(m.value)+" đơn tố cáo)",1)]),t("form",{onSubmit:z(R,["prevent"]),class:"max-w-[500px] w-full mr-0 mt-0 rounded-[16px] bg-[var(--bgColor3)] border border-[rgba(255,255,255,0.1)] flex items-center p-[5px] mx-auto"},[K(t("input",{type:"search",placeholder:"Kiểm tra số tài khoản ngân hàng...","onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),class:"flex-1 bg-transparent border-none outline-none pl-[19px] text-[var(--textColor)]"},null,512),[[L,c.value]]),e[2]||(e[2]=t("button",{class:"btn"},[t("img",{src:G,alt:"",class:"block md:hidden"}),t("span",{class:"hidden md:block"},"Tìm Kiếm")],-1))],32)]),t("div",et,[e[8]||(e[8]=V('<table class="w-full overflow-hidden rounded-t-[16px] border-spacing-0 table-fixed"><colgroup><col style="width:5%;"><col style="width:15%;"><col style="width:10%;"><col style="width:10%;"><col style="width:10%;"><col style="width:15%;"><col style="width:10%;"><col style="width:10%;"></colgroup><thead class="bg-[var(--bgColor3)]"><tr><th class="p-[16px] text-left">id</th><th class="p-[16px] text-left">Chủ tài khoản</th><th class="p-[16px] text-left">Số tài khoản</th><th class="p-[16px] text-left">Ngân hàng</th><th class="p-[16px] text-left">Sđt đối tượng</th><th class="p-[16px] text-left">Người gửi đơn</th><th class="p-[16px] text-left">Ngày gửi</th><th class="p-[16px] text-left"></th></tr></thead></table>',1)),t("div",st,[t("table",ot,[e[7]||(e[7]=t("colgroup",null,[t("col",{style:{width:"5%"}}),t("col",{style:{width:"15%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"15%"}}),t("col",{style:{width:"10%"}}),t("col",{style:{width:"10%"}})],-1)),u.value?(d(),r("tbody",at,e[3]||(e[3]=[t("tr",null,[t("td",{colspan:"8",class:"relative h-[calc(100vh-327px)]"},[t("div",{class:"fui-loading-ring loading absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},[t("div"),t("div"),t("div"),t("div")])])],-1)]))):n.value.length?(d(),r("tbody",lt,[(d(!0),r(g,null,S(n.value,s=>(d(),r("tr",{key:s.id,class:"dashboard__table-bodyItem"},[t("td",nt,"#"+a(s.id),1),t("td",it,a(s.nameScammer),1),t("td",rt,a(s.bankNumber),1),t("td",dt,a(s.bankName),1),t("td",ct,a(s.phoneScammer),1),t("td",pt,a(s.nameSender),1),t("td",ut,a(b(s.created_at)),1),t("td",xt,[t("span",{onClick:i=>B(s),class:"cursor-pointer text-[18px]"},e[4]||(e[4]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,mt),t("span",{onClick:i=>A(s.id),class:"cursor-pointer text-[18px] text-[var(--redColor)]"},e[5]||(e[5]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,ht)])]))),128))])):(d(),r("tbody",ft,[t("tr",null,[t("td",gt,[t("div",vt,[e[6]||(e[6]=t("img",{src:O,class:"h-[200px]"},null,-1)),t("span",_t,a(x.value&&!n.value.length?"Không có dữ liệu bạn cần tìm":"Không có dữ liệu"),1)])])])]))])])]),h.value?(d(),r("section",bt,[t("div",{onClick:w,class:"absolute top-0 right-0 left-0 bottom-0 bg-black/60 cursor-pointer z-[-1]"}),t("div",yt,[t("div",{class:"flex justify-between items-center h-[54px] py-[12px] px-[16px] border-b border-[#FFFFFF1A]"},[e[10]||(e[10]=t("div",{class:"text-[20px] font-semibold"},"Chi tiết tố cáo",-1)),t("div",{onClick:w,class:"w-[30px] h-[30px] rounded-full bg-[var(--bgColor3)] flex justify-center items-center cursor-pointer transition-all duration-200 ease-linear hover:opacity-50"},e[9]||(e[9]=[t("img",{src:H,alt:"close icon",class:"pointer-events-none"},null,-1)]))]),t("div",wt,[t("div",kt,[t("div",Ct,[e[11]||(e[11]=t("div",{class:"modal__profile-image"},[t("img",{src:X,alt:"avatar"})],-1)),t("div",St,[t("h4",Ft,a(l.value.nameScammer),1),t("p",Tt,"#"+a(l.value.id)+" - Tố vào ngày "+a(b(l.value.created_at)),1)])]),t("div",Dt,[e[12]||(e[12]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số điện thoại",-1)),t("span",Nt,a(l.value.phoneScammer),1)]),t("div",Bt,[e[13]||(e[13]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Số tài khoản",-1)),t("span",$t,a(l.value.bankNumber),1)]),t("div",jt,[e[14]||(e[14]=t("span",{class:"text-[--subTextColor] flex-shrink-0"},"Ngân Hàng",-1)),t("span",Rt,a(l.value.bankName),1)])]),t("div",At,[t("div",It,[e[16]||(e[16]=t("div",{class:"modal__profile-image"},[t("img",{src:E,alt:"avatar"})],-1)),t("div",Mt,[t("h4",qt,a(l.value.nameSender),1),e[15]||(e[15]=t("p",{class:"text-[var(--subTextColor)]"},"Người tố cáo",-1))])]),t("div",zt,[e[17]||(e[17]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Trạng Thái",-1)),t("span",Kt,a(l.value.option),1)]),t("div",Lt,[e[18]||(e[18]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Liên hệ",-1)),t("span",Vt,a(l.value.phoneSender),1)]),t("div",Ht,[e[19]||(e[19]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Nội dung tố cáo",-1)),t("p",Et,a(l.value.contentReport),1)]),t("div",Pt,[e[20]||(e[20]=t("span",{class:"text-[var(--subTextColor)] flex-shrink-0"},"Hình ảnh liên quan",-1)),t("div",{ref_key:"galleryRef",ref:f,class:"grid grid-cols-3 gap-2 mt-2"},[(d(!0),r(g,null,S(l.value.imagesProof,(s,i)=>(d(),r("a",{key:i,href:s},[t("img",{src:s,alt:`Ảnh bằng chứng ${l.value.nameScammer} ${i+1}`,class:"h-[237px] w-full object-cover rounded-[8px] cursor-pointer transition duration-200 hover:opacity-50"},null,8,Gt)],8,Ut))),128))],512)])])])])])):q("",!0)],64))}};export{Zt as default};
